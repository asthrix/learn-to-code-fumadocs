---
title: "Testing with Cypress"
description:
   "Build a resilient Cypress suite to guard TaskFlow Pro's advanced features."
module: "MX"
lesson: "7"
difficulty: "advanced"
duration: "30"
project_phase: "Advanced polish"
prerequisites: ["/docs/react-new/mx/6_reviews"]
learning_objectives:
   - "Structure Cypress tests with Page Objects"
   - "Stub network calls for deterministic runs"
   - "Integrate Cypress into CI pipelines"
   - "Collect artifacts and videos for triage"
tags: ["testing", "cypress", "ci"]
---

import { Accordions, Accordion } from "@/components/accordion";

# Testing with Cypress

## Project Structure

```txt filename="cypress/"
├── e2e/
│   ├── auth.cy.ts
│   ├── listings.cy.ts
│   └── reviews.cy.ts
├── fixtures/
│   └── listings.json
├── page-objects/
│   ├── LoginPage.ts
│   └── DashboardPage.ts
└── support/
    ├── commands.ts
    └── e2e.ts
```

---

## Page Objects

```ts filename="cypress/page-objects/ListingPage.ts"
export class ListingPage {
   visit(id: string) {
      cy.visit(`/listings/${id}`);
   }

   startReview(rating: number, comment: string) {
      cy.findByLabelText(/rating/i)
         .clear()
         .type(String(rating));
      cy.findByLabelText(/comment/i).type(comment);
      cy.findByRole("button", { name: /submit review/i }).click();
   }
}
```

---

## Network Stubs

```ts filename="cypress/e2e/listings.cy.ts"
import { ListingPage } from "../page-objects/ListingPage";

describe("Listings", () => {
   const page = new ListingPage();

   beforeEach(() => {
      cy.intercept("GET", "/api/listings/*", { fixture: "listings.json" }).as(
         "getListing"
      );
   });

   it("shows listing details", () => {
      page.visit("demo-listing");
      cy.wait("@getListing");
      cy.findByRole("heading", { name: /marketing plan/i }).should("exist");
   });
});
```

---

## CI Integration

```yml filename=".github/workflows/e2e.yml"
name: E2E Tests

on: [pull_request]

jobs:
   cypress:
      runs-on: ubuntu-latest
      steps:
         - uses: actions/checkout@v4
         - uses: actions/setup-node@v4
           with:
              node-version: 20
         - run: npm ci
         - run: npm run build
         - run: npx cypress run --record --key ${{ secrets.CYPRESS_KEY }}
           env:
              CYPRESS_BASE_URL: ${{ secrets.PREVIEW_URL }}
```

<Accordions type='single' className='mt-4'>
   <Accordion title='Artifacts Checklist'>
      <ul className='list-disc pl-5 text-sm'>
         <li>Enable video recording for failing tests.</li>
         <li>Upload screenshots to CI for quick triage.</li>
         <li>Tag flaky tests and quarantine until stabilized.</li>
      </ul>
   </Accordion>
</Accordions>

---

## ✅ Validation Checklist

-  [ ] Cypress project uses Page Objects and fixtures.
-  [ ] Network stubbing keeps suites deterministic.
-  [ ] CI workflow publishes videos/screenshots.
-  [ ] Flaky test mitigation plan documented.

---

<div className='mt-8 flex justify-between'>
   <a
      href='/docs/react-new/mx/6_reviews'
      className='text-sm font-medium text-muted-foreground hover:text-foreground'
   >
      ← Implementing Reviews
   </a>
   <a
      href='/docs/react-new/mx/8_react-19-note'
      className='text-sm font-medium text-primary hover:text-primary/80'
   >
      Next · Note on React 19
   </a>
</div>
