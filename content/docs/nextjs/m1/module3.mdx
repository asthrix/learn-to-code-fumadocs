---
title: Module 3 - State Management & Event Handling
description:
   Learn how to add interactivity to React components with useState hook and
   event handling
---

# Module 3: State Management & Event Handling

In this module, we'll make our React components interactive by learning about
state management using the `useState` hook and handling user events.

## Introduction to State

State is data that can change over time in your component. Unlike props, which
are read-only, state is mutable and controlled by the component itself.

### Your First useState Hook

```jsx
import React, { useState } from "react";

function Counter() {
   // Declare a state variable called 'count' with initial value 0
   const [count, setCount] = useState(0);

   return (
      <div>
         <p>You clicked {count} times</p>
         <button onClick={() => setCount(count + 1)}>Click me</button>
      </div>
   );
}
```

### Understanding useState

```jsx
// useState returns an array with two elements:
const [stateValue, setStateFunction] = useState(initialValue);

// Examples with different data types:
const [name, setName] = useState(""); // string
const [age, setAge] = useState(0); // number
const [isVisible, setIsVisible] = useState(true); // boolean
const [items, setItems] = useState([]); // array
const [user, setUser] = useState({}); // object
```

## Event Handling

React uses SyntheticEvents, which wrap native DOM events to provide consistent
behavior across browsers.

### Basic Event Handlers

```jsx
function EventExample() {
   const [message, setMessage] = useState("");

   const handleClick = () => {
      setMessage("Button was clicked!");
   };

   const handleMouseEnter = () => {
      setMessage("Mouse entered the button!");
   };

   const handleMouseLeave = () => {
      setMessage("Mouse left the button!");
   };

   return (
      <div>
         <button
            onClick={handleClick}
            onMouseEnter={handleMouseEnter}
            onMouseLeave={handleMouseLeave}
            style={{
               padding: "10px 20px",
               backgroundColor: "#007bff",
               color: "white",
               border: "none",
               borderRadius: "4px",
               cursor: "pointer",
            }}
         >
            Hover or Click Me
         </button>
         <p>{message}</p>
      </div>
   );
}
```

### Form Handling

```jsx
function ContactForm() {
   const [formData, setFormData] = useState({
      name: "",
      email: "",
      message: "",
   });

   const handleInputChange = (event) => {
      const { name, value } = event.target;
      setFormData((prevData) => ({
         ...prevData,
         [name]: value,
      }));
   };

   const handleSubmit = (event) => {
      event.preventDefault();
      console.log("Form submitted:", formData);
      alert(`Thank you, ${formData.name}! Your message has been sent.`);

      // Reset form
      setFormData({
         name: "",
         email: "",
         message: "",
      });
   };

   return (
      <form
         onSubmit={handleSubmit}
         style={{ maxWidth: "400px", margin: "0 auto" }}
      >
         <div style={{ marginBottom: "15px" }}>
            <label
               htmlFor='name'
               style={{ display: "block", marginBottom: "5px" }}
            >
               Name:
            </label>
            <input
               type='text'
               id='name'
               name='name'
               value={formData.name}
               onChange={handleInputChange}
               required
               style={{
                  width: "100%",
                  padding: "8px",
                  border: "1px solid #ddd",
                  borderRadius: "4px",
               }}
            />
         </div>

         <div style={{ marginBottom: "15px" }}>
            <label
               htmlFor='email'
               style={{ display: "block", marginBottom: "5px" }}
            >
               Email:
            </label>
            <input
               type='email'
               id='email'
               name='email'
               value={formData.email}
               onChange={handleInputChange}
               required
               style={{
                  width: "100%",
                  padding: "8px",
                  border: "1px solid #ddd",
                  borderRadius: "4px",
               }}
            />
         </div>

         <div style={{ marginBottom: "15px" }}>
            <label
               htmlFor='message'
               style={{ display: "block", marginBottom: "5px" }}
            >
               Message:
            </label>
            <textarea
               id='message'
               name='message'
               value={formData.message}
               onChange={handleInputChange}
               required
               rows='4'
               style={{
                  width: "100%",
                  padding: "8px",
                  border: "1px solid #ddd",
                  borderRadius: "4px",
                  resize: "vertical",
               }}
            />
         </div>

         <button
            type='submit'
            style={{
               backgroundColor: "#28a745",
               color: "white",
               padding: "10px 20px",
               border: "none",
               borderRadius: "4px",
               cursor: "pointer",
               fontSize: "16px",
            }}
         >
            Send Message
         </button>
      </form>
   );
}
```

## Interactive Components Examples

### Toggle Component

```jsx
function ToggleSwitch() {
   const [isOn, setIsOn] = useState(false);

   const toggle = () => setIsOn(!isOn);

   return (
      <div style={{ textAlign: "center", padding: "20px" }}>
         <div
            onClick={toggle}
            style={{
               width: "60px",
               height: "30px",
               borderRadius: "15px",
               backgroundColor: isOn ? "#4CAF50" : "#ccc",
               position: "relative",
               cursor: "pointer",
               transition: "background-color 0.3s",
               display: "inline-block",
            }}
         >
            <div
               style={{
                  width: "26px",
                  height: "26px",
                  borderRadius: "50%",
                  backgroundColor: "white",
                  position: "absolute",
                  top: "2px",
                  left: isOn ? "32px" : "2px",
                  transition: "left 0.3s",
                  boxShadow: "0 2px 4px rgba(0,0,0,0.2)",
               }}
            />
         </div>
         <p>The switch is {isOn ? "ON" : "OFF"}</p>
      </div>
   );
}
```

### Shopping Cart Component

```jsx
function ShoppingCart() {
   const [items, setItems] = useState([]);
   const [newItem, setNewItem] = useState("");

   const addItem = () => {
      if (newItem.trim()) {
         const item = {
            id: Date.now(),
            name: newItem,
            quantity: 1,
         };
         setItems([...items, item]);
         setNewItem("");
      }
   };

   const removeItem = (id) => {
      setItems(items.filter((item) => item.id !== id));
   };

   const updateQuantity = (id, newQuantity) => {
      if (newQuantity <= 0) {
         removeItem(id);
         return;
      }

      setItems(
         items.map((item) =>
            item.id === id ? { ...item, quantity: newQuantity } : item
         )
      );
   };

   const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);

   return (
      <div style={{ maxWidth: "500px", margin: "0 auto", padding: "20px" }}>
         <h2>Shopping Cart ({totalItems} items)</h2>

         <div style={{ marginBottom: "20px", display: "flex", gap: "10px" }}>
            <input
               type='text'
               placeholder='Add item...'
               value={newItem}
               onChange={(e) => setNewItem(e.target.value)}
               onKeyPress={(e) => e.key === "Enter" && addItem()}
               style={{
                  flex: 1,
                  padding: "8px",
                  border: "1px solid #ddd",
                  borderRadius: "4px",
               }}
            />
            <button
               onClick={addItem}
               style={{
                  backgroundColor: "#007bff",
                  color: "white",
                  border: "none",
                  padding: "8px 16px",
                  borderRadius: "4px",
                  cursor: "pointer",
               }}
            >
               Add
            </button>
         </div>

         {items.length === 0 ? (
            <p style={{ textAlign: "center", color: "#666" }}>
               Your cart is empty
            </p>
         ) : (
            <ul style={{ listStyle: "none", padding: 0 }}>
               {items.map((item) => (
                  <li
                     key={item.id}
                     style={{
                        display: "flex",
                        alignItems: "center",
                        justifyContent: "space-between",
                        padding: "10px",
                        borderBottom: "1px solid #eee",
                     }}
                  >
                     <span style={{ flex: 1 }}>{item.name}</span>

                     <div
                        style={{
                           display: "flex",
                           alignItems: "center",
                           gap: "10px",
                        }}
                     >
                        <button
                           onClick={() =>
                              updateQuantity(item.id, item.quantity - 1)
                           }
                           style={{
                              backgroundColor: "#6c757d",
                              color: "white",
                              border: "none",
                              borderRadius: "50%",
                              width: "24px",
                              height: "24px",
                              cursor: "pointer",
                           }}
                        >
                           -
                        </button>

                        <span style={{ minWidth: "20px", textAlign: "center" }}>
                           {item.quantity}
                        </span>

                        <button
                           onClick={() =>
                              updateQuantity(item.id, item.quantity + 1)
                           }
                           style={{
                              backgroundColor: "#28a745",
                              color: "white",
                              border: "none",
                              borderRadius: "50%",
                              width: "24px",
                              height: "24px",
                              cursor: "pointer",
                           }}
                        >
                           +
                        </button>

                        <button
                           onClick={() => removeItem(item.id)}
                           style={{
                              backgroundColor: "#dc3545",
                              color: "white",
                              border: "none",
                              padding: "4px 8px",
                              borderRadius: "4px",
                              cursor: "pointer",
                              marginLeft: "10px",
                           }}
                        >
                           Remove
                        </button>
                     </div>
                  </li>
               ))}
            </ul>
         )}
      </div>
   );
}
```

### Todo App with Local Storage

```jsx
function TodoApp() {
   // Load todos from localStorage on component mount
   const [todos, setTodos] = useState(() => {
      const savedTodos = localStorage.getItem("todos");
      return savedTodos ? JSON.parse(savedTodos) : [];
   });

   const [newTodo, setNewTodo] = useState("");
   const [filter, setFilter] = useState("all"); // all, active, completed

   // Save todos to localStorage whenever todos change
   React.useEffect(() => {
      localStorage.setItem("todos", JSON.stringify(todos));
   }, [todos]);

   const addTodo = () => {
      if (newTodo.trim()) {
         const todo = {
            id: Date.now(),
            text: newTodo,
            completed: false,
            createdAt: new Date().toISOString(),
         };
         setTodos([...todos, todo]);
         setNewTodo("");
      }
   };

   const toggleTodo = (id) => {
      setTodos(
         todos.map((todo) =>
            todo.id === id ? { ...todo, completed: !todo.completed } : todo
         )
      );
   };

   const deleteTodo = (id) => {
      setTodos(todos.filter((todo) => todo.id !== id));
   };

   const clearCompleted = () => {
      setTodos(todos.filter((todo) => !todo.completed));
   };

   const filteredTodos = todos.filter((todo) => {
      if (filter === "active") return !todo.completed;
      if (filter === "completed") return todo.completed;
      return true; // 'all'
   });

   const activeTodosCount = todos.filter((todo) => !todo.completed).length;

   return (
      <div style={{ maxWidth: "600px", margin: "0 auto", padding: "20px" }}>
         <h1 style={{ textAlign: "center", color: "#333" }}>Todo App</h1>

         {/* Add Todo */}
         <div style={{ marginBottom: "20px", display: "flex", gap: "10px" }}>
            <input
               type='text'
               placeholder='What needs to be done?'
               value={newTodo}
               onChange={(e) => setNewTodo(e.target.value)}
               onKeyPress={(e) => e.key === "Enter" && addTodo()}
               style={{
                  flex: 1,
                  padding: "12px",
                  border: "2px solid #ddd",
                  borderRadius: "8px",
                  fontSize: "16px",
               }}
            />
            <button
               onClick={addTodo}
               style={{
                  backgroundColor: "#4CAF50",
                  color: "white",
                  border: "none",
                  padding: "12px 24px",
                  borderRadius: "8px",
                  cursor: "pointer",
                  fontSize: "16px",
               }}
            >
               Add
            </button>
         </div>

         {/* Filters */}
         <div style={{ marginBottom: "20px", textAlign: "center" }}>
            {["all", "active", "completed"].map((filterType) => (
               <button
                  key={filterType}
                  onClick={() => setFilter(filterType)}
                  style={{
                     margin: "0 5px",
                     padding: "8px 16px",
                     border: "1px solid #ddd",
                     borderRadius: "4px",
                     backgroundColor:
                        filter === filterType ? "#007bff" : "white",
                     color: filter === filterType ? "white" : "#333",
                     cursor: "pointer",
                     textTransform: "capitalize",
                  }}
               >
                  {filterType}
               </button>
            ))}
         </div>

         {/* Todo List */}
         <ul style={{ listStyle: "none", padding: 0 }}>
            {filteredTodos.map((todo) => (
               <li
                  key={todo.id}
                  style={{
                     display: "flex",
                     alignItems: "center",
                     padding: "12px",
                     border: "1px solid #eee",
                     borderRadius: "8px",
                     marginBottom: "8px",
                     backgroundColor: todo.completed ? "#f8f9fa" : "white",
                  }}
               >
                  <input
                     type='checkbox'
                     checked={todo.completed}
                     onChange={() => toggleTodo(todo.id)}
                     style={{ marginRight: "12px", transform: "scale(1.2)" }}
                  />
                  <span
                     style={{
                        flex: 1,
                        textDecoration: todo.completed
                           ? "line-through"
                           : "none",
                        color: todo.completed ? "#999" : "#333",
                        fontSize: "16px",
                     }}
                  >
                     {todo.text}
                  </span>
                  <button
                     onClick={() => deleteTodo(todo.id)}
                     style={{
                        backgroundColor: "#dc3545",
                        color: "white",
                        border: "none",
                        padding: "6px 12px",
                        borderRadius: "4px",
                        cursor: "pointer",
                     }}
                  >
                     Delete
                  </button>
               </li>
            ))}
         </ul>

         {/* Footer */}
         {todos.length > 0 && (
            <div
               style={{
                  display: "flex",
                  justifyContent: "space-between",
                  alignItems: "center",
                  marginTop: "20px",
                  padding: "10px",
                  backgroundColor: "#f8f9fa",
                  borderRadius: "8px",
               }}
            >
               <span>{activeTodosCount} items left</span>
               {todos.some((todo) => todo.completed) && (
                  <button
                     onClick={clearCompleted}
                     style={{
                        backgroundColor: "#6c757d",
                        color: "white",
                        border: "none",
                        padding: "6px 12px",
                        borderRadius: "4px",
                        cursor: "pointer",
                     }}
                  >
                     Clear completed
                  </button>
               )}
            </div>
         )}
      </div>
   );
}
```

## Advanced State Patterns

### State Updates with Previous State

```jsx
function Counter() {
   const [count, setCount] = useState(0);

   // ❌ Wrong: May not work correctly with multiple rapid updates
   const incrementWrong = () => {
      setCount(count + 1);
      setCount(count + 1); // This won't work as expected
   };

   // ✅ Correct: Use function update pattern
   const incrementCorrect = () => {
      setCount((prevCount) => prevCount + 1);
      setCount((prevCount) => prevCount + 1); // This works correctly
   };

   return (
      <div>
         <p>Count: {count}</p>
         <button onClick={incrementCorrect}>+2</button>
      </div>
   );
}
```

### Managing Complex State

```jsx
function UserProfile() {
   const [user, setUser] = useState({
      name: "",
      email: "",
      preferences: {
         theme: "light",
         notifications: true,
         language: "en",
      },
   });

   const updateUser = (field, value) => {
      setUser((prevUser) => ({
         ...prevUser,
         [field]: value,
      }));
   };

   const updatePreference = (preference, value) => {
      setUser((prevUser) => ({
         ...prevUser,
         preferences: {
            ...prevUser.preferences,
            [preference]: value,
         },
      }));
   };

   return (
      <div style={{ maxWidth: "400px", margin: "0 auto", padding: "20px" }}>
         <h2>User Profile</h2>

         <div style={{ marginBottom: "15px" }}>
            <label>Name:</label>
            <input
               type='text'
               value={user.name}
               onChange={(e) => updateUser("name", e.target.value)}
               style={{ width: "100%", padding: "8px", marginTop: "5px" }}
            />
         </div>

         <div style={{ marginBottom: "15px" }}>
            <label>Email:</label>
            <input
               type='email'
               value={user.email}
               onChange={(e) => updateUser("email", e.target.value)}
               style={{ width: "100%", padding: "8px", marginTop: "5px" }}
            />
         </div>

         <h3>Preferences</h3>

         <div style={{ marginBottom: "10px" }}>
            <label>
               <input
                  type='checkbox'
                  checked={user.preferences.notifications}
                  onChange={(e) =>
                     updatePreference("notifications", e.target.checked)
                  }
               />
               Enable notifications
            </label>
         </div>

         <div style={{ marginBottom: "10px" }}>
            <label>Theme:</label>
            <select
               value={user.preferences.theme}
               onChange={(e) => updatePreference("theme", e.target.value)}
               style={{ marginLeft: "10px", padding: "4px" }}
            >
               <option value='light'>Light</option>
               <option value='dark'>Dark</option>
            </select>
         </div>

         <div
            style={{
               marginTop: "20px",
               padding: "10px",
               backgroundColor: "#f5f5f5",
            }}
         >
            <h4>Current State:</h4>
            <pre>{JSON.stringify(user, null, 2)}</pre>
         </div>
      </div>
   );
}
```

## Common Patterns and Best Practices

### 1. Event Handler Naming

```jsx
// ✅ Good: Clear naming convention
const handleSubmit = (event) => {
   /* ... */
};
const handleInputChange = (event) => {
   /* ... */
};
const handleDeleteClick = (id) => {
   /* ... */
};

// ❌ Avoid: Generic or unclear names
const submit = (event) => {
   /* ... */
};
const change = (event) => {
   /* ... */
};
const click = (id) => {
   /* ... */
};
```

### 2. Controlled vs Uncontrolled Components

```jsx
// ✅ Controlled Component (Recommended)
function ControlledInput() {
   const [value, setValue] = useState("");

   return <input value={value} onChange={(e) => setValue(e.target.value)} />;
}

// Uncontrolled Component (Use sparingly)
function UncontrolledInput() {
   const inputRef = useRef();

   const handleSubmit = () => {
      console.log(inputRef.current.value);
   };

   return (
      <div>
         <input ref={inputRef} defaultValue='initial value' />
         <button onClick={handleSubmit}>Submit</button>
      </div>
   );
}
```

## Exercise: Build a Quiz App

Create a quiz application with the following features:

-  Display questions one at a time
-  Track selected answers
-  Show score at the end
-  Allow restart

```jsx
function QuizApp() {
   const questions = [
      {
         id: 1,
         question: "What is the capital of France?",
         options: ["London", "Berlin", "Paris", "Madrid"],
         correct: 2,
      },
      {
         id: 2,
         question: "Which planet is known as the Red Planet?",
         options: ["Venus", "Mars", "Jupiter", "Saturn"],
         correct: 1,
      },
      {
         id: 3,
         question: "What is 2 + 2?",
         options: ["3", "4", "5", "6"],
         correct: 1,
      },
   ];

   const [currentQuestion, setCurrentQuestion] = useState(0);
   const [selectedAnswers, setSelectedAnswers] = useState({});
   const [showResults, setShowResults] = useState(false);

   const handleAnswerSelect = (questionId, answerIndex) => {
      setSelectedAnswers((prev) => ({
         ...prev,
         [questionId]: answerIndex,
      }));
   };

   const nextQuestion = () => {
      if (currentQuestion < questions.length - 1) {
         setCurrentQuestion(currentQuestion + 1);
      } else {
         setShowResults(true);
      }
   };

   const resetQuiz = () => {
      setCurrentQuestion(0);
      setSelectedAnswers({});
      setShowResults(false);
   };

   const calculateScore = () => {
      return questions.reduce((score, question) => {
         return selectedAnswers[question.id] === question.correct
            ? score + 1
            : score;
      }, 0);
   };

   if (showResults) {
      const score = calculateScore();
      return (
         <div
            style={{
               maxWidth: "500px",
               margin: "0 auto",
               padding: "20px",
               textAlign: "center",
            }}
         >
            <h2>Quiz Complete!</h2>
            <p style={{ fontSize: "24px" }}>
               Your Score: {score} / {questions.length}
            </p>
            <button
               onClick={resetQuiz}
               style={{
                  backgroundColor: "#007bff",
                  color: "white",
                  border: "none",
                  padding: "10px 20px",
                  borderRadius: "4px",
                  cursor: "pointer",
                  fontSize: "16px",
               }}
            >
               Take Quiz Again
            </button>
         </div>
      );
   }

   const question = questions[currentQuestion];

   return (
      <div style={{ maxWidth: "500px", margin: "0 auto", padding: "20px" }}>
         <div style={{ marginBottom: "20px" }}>
            <h3>
               Question {currentQuestion + 1} of {questions.length}
            </h3>
            <div
               style={{
                  backgroundColor: "#e9ecef",
                  height: "8px",
                  borderRadius: "4px",
               }}
            >
               <div
                  style={{
                     backgroundColor: "#007bff",
                     height: "100%",
                     width: `${
                        ((currentQuestion + 1) / questions.length) * 100
                     }%`,
                     borderRadius: "4px",
                     transition: "width 0.3s",
                  }}
               />
            </div>
         </div>

         <h2 style={{ marginBottom: "20px" }}>{question.question}</h2>

         <div style={{ marginBottom: "20px" }}>
            {question.options.map((option, index) => (
               <label
                  key={index}
                  style={{
                     display: "block",
                     padding: "12px",
                     margin: "8px 0",
                     border: "2px solid #ddd",
                     borderRadius: "8px",
                     cursor: "pointer",
                     backgroundColor:
                        selectedAnswers[question.id] === index
                           ? "#e3f2fd"
                           : "white",
                     borderColor:
                        selectedAnswers[question.id] === index
                           ? "#2196f3"
                           : "#ddd",
                  }}
               >
                  <input
                     type='radio'
                     name={`question-${question.id}`}
                     checked={selectedAnswers[question.id] === index}
                     onChange={() => handleAnswerSelect(question.id, index)}
                     style={{ marginRight: "8px" }}
                  />
                  {option}
               </label>
            ))}
         </div>

         <button
            onClick={nextQuestion}
            disabled={selectedAnswers[question.id] === undefined}
            style={{
               backgroundColor:
                  selectedAnswers[question.id] !== undefined
                     ? "#28a745"
                     : "#6c757d",
               color: "white",
               border: "none",
               padding: "12px 24px",
               borderRadius: "4px",
               cursor:
                  selectedAnswers[question.id] !== undefined
                     ? "pointer"
                     : "not-allowed",
               fontSize: "16px",
               width: "100%",
            }}
         >
            {currentQuestion < questions.length - 1
               ? "Next Question"
               : "Finish Quiz"}
         </button>
      </div>
   );
}
```

## Key Concepts Mastered

1. **useState Hook**: Managing component state
2. **Event Handling**: Responding to user interactions
3. **Form Handling**: Controlled components and form submission
4. **State Updates**: Using functional updates for complex state
5. **Local Storage**: Persisting state between sessions
6. **Conditional Logic**: Showing different UI based on state

## Common Patterns

1. **Form State Management**: Single state object for form data
2. **List Operations**: Adding, removing, updating items
3. **Toggle States**: Boolean state for show/hide functionality
4. **Derived State**: Calculating values from existing state
5. **State Persistence**: Using localStorage or sessionStorage

## Summary

In this module, you've learned: ✅ useState hook for state management  
✅ Event handling in React  
✅ Form handling and controlled components  
✅ Building interactive components  
✅ State patterns and best practices  
✅ Complex state management techniques

Next up: Module 4 where we'll explore useEffect and component lifecycle!
