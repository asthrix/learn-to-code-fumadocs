---
title: "React Router Part 2"
description:
   "Add navigation links, active states, and programmatic navigation for
   TaskFlow Pro."
module: "M4"
lesson: "5"
difficulty: "intermediate"
duration: "30"
project_phase: "Navigation"
prerequisites: ["/docs/react/m4/4_react-router-part-1"]
learning_objectives:
   - "Use `Link` and `NavLink` for navigation"
   - "Style active links in the sidebar"
   - "Navigate programmatically with hooks"
   - "Handle search params for filters"
tags: ["react-router", "navigation", "hooks"]
---

import { Accordions, Accordion } from "@/components/accordion";

# React Router Part 2

## Learning Objectives

By the end of this lesson, you will:

-  [ ] Render navigation links using `Link` and `NavLink`.
-  [ ] Style active links with the TaskFlow Pro design system.
-  [ ] Use `useNavigate` and `useSearchParams` for programmatic navigation.
-  [ ] Sync toolbar filters with URL query strings.

## Project Context

TaskFlow Pro's sidebar should reflect the user's current view and allow
bookmarking filtered lists. This lesson wires interactive navigation components
and exposes query params to existing state hooks.

---

## `Link` vs `NavLink`

-  `Link` navigates without reloading.
-  `NavLink` automatically applies an active class when its route matches.

### Basic Example

```tsx
<NavLink
   to='/projects'
   className={({ isActive }) => (isActive ? "text-primary" : "")}
>
   Projects
</NavLink>
```

### Practical Example

```tsx
<NavLink
   to={routes.dashboard}
   className={({ isActive }) =>
      cn("flex items-center gap-2 rounded-lg px-3 py-2", {
         "bg-primary/10 text-primary": isActive,
      })
   }
>
   <Icons.dashboard />
   Dashboard
</NavLink>
```

---

## Programmatic Navigation Hooks

-  `useNavigate()` returns a function to push or replace history entries.
-  `useSearchParams()` reads and sets query strings elegantly.

```tsx
const navigate = useNavigate();
const [searchParams, setSearchParams] = useSearchParams();

function handleFilterChange(status: StatusFilter) {
   setSearchParams({ status });
   navigate({ search: `?status=${status}` }, { replace: true });
}
```

---

## ‚úÖ Best Practices

### 1. Extract Navigation Config

**Why:** Keeps sidebar declarative and consistent.

```ts
const navItems = [
   { label: "Dashboard", icon: Icons.dashboard, to: routes.dashboard },
];
```

### 2. Sync URL and State

**Why:** Users can share filtered views; state restores on refresh.

```tsx
useEffect(() => {
   const status = searchParams.get("status") ?? "all";
   setStatusFilter(status as StatusFilter);
}, [searchParams]);
```

---

## ‚ùå Common Mistakes

### 1. Styling Active Links Manually

**Problem:** Hardcoding classes leads to drift.

**Solution:** Leverage `NavLink`'s `isActive` argument.

### 2. Forgetting to Debounce Search Params

**Problem:** Rapid updates spam history entries.

**Solution:** Use `replace: true` or debounced updates for search inputs.

---

## üî® Implement in TaskFlow Pro

Wire navigation UI to the router:

1. Update `Sidebar` to map over a `navItems` array using `NavLink` for active
   styling.
2. Add icons and badges (if desired) using existing components
   (`buttonVariants`, `Badge`).
3. Modify `TaskToolbar` to read/write status filter via `useSearchParams`,
   keeping hook state in sync.
4. Commit with `git commit -am "feat: add routed navigation"`.

<Accordions type='single' className='mt-4'>
   <Accordion title='Solution Walkthrough'>
      <p>Connect the router to navigation components and filter controls.</p>

      ```tsx filename="src/components/layout/Sidebar.tsx"
      import { NavLink } from "react-router-dom";
      import { routes } from "@/router/routes";
      import { cn } from "@/lib/cn";
      import { Icons } from "@/components/icons";

      const navItems = [
         { label: "Dashboard", icon: Icons.dashboard, to: routes.dashboard },
         { label: "Projects", icon: Icons.folder, to: routes.projects },
         { label: "Settings", icon: Icons.settings, to: routes.settings },
      ];

      export function Sidebar() {
         return (
            <nav className='space-y-1'>
               {navItems.map((item) => (
                  <NavLink
                     key={item.to}
                     to={item.to}
                     className={({ isActive }) =>
                        cn(
                           "flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition",
                           isActive
                              ? "bg-primary/10 text-primary"
                              : "text-muted-foreground hover:bg-muted"
                        )
                     }
                  >
                     <item.icon className='h-4 w-4' />
                     {item.label}
                  </NavLink>
               ))}
            </nav>
         );
      }
      ```

      ```tsx filename="src/components/tasks/TaskToolbar.tsx"
      import { useEffect } from "react";
      import { useSearchParams } from "react-router-dom";

      export function TaskToolbar({ status, onStatusChange, onSearch }: TaskToolbarProps) {
         const [searchParams, setSearchParams] = useSearchParams();

         useEffect(() => {
            const statusParam = searchParams.get("status") as StatusFilter | null;
            if (statusParam && statusParam !== status) {
               onStatusChange(statusParam);
            }
         }, [searchParams, onStatusChange, status]);

         const handleStatusSelect = (next: StatusFilter) => {
            onStatusChange(next);
            setSearchParams((previous) => {
               const params = new URLSearchParams(previous);
               params.set("status", next);
               return params;
            }, { replace: true });
         };

         // ...rest of the component
      }
      ```

      ```bash
      git add src/components/layout/Sidebar.tsx src/components/tasks/TaskToolbar.tsx
      git commit -m "feat: add routed navigation"
      ```

   </Accordion>
</Accordions>

#### Expected Result

Navigation reflects the active route, and filter state syncs with the URL for
shareable dashboards.

---

## ‚úÖ Validation Checklist

### Functionality

-  [ ] Sidebar links highlight the current view.
-  [ ] Status filters persist when refreshing or sharing the URL.

### Code Quality

-  [ ] Navigation config is centralized.
-  [ ] Search param updates avoid history spam (`replace: true`).

### Understanding

-  [ ] You can describe how `NavLink` works behind the scenes.
-  [ ] You know when to use `useNavigate` vs `Link`.

### Project Integration

-  [ ] Toolbar hooks integrate cleanly with routing additions.
-  [ ] URL structure matches the Module 4 routing plan.

---

