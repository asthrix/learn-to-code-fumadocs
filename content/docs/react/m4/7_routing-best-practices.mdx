---
title: "Routing Best Practices"
description:
   "Standardize navigation patterns for reliability, accessibility, and
   maintainability."
module: "M4"
lesson: "7"
difficulty: "advanced"
duration: "25"
project_phase: "Navigation"
prerequisites: ["/docs/react/m4/6_react-router-part-3"]
learning_objectives:
   - "Apply accessibility and UX best practices to routing"
   - "Guard routes for future authentication"
   - "Log navigation events for analytics"
   - "Create a reusable routing checklist"
tags: ["routing", "best-practices", "ux"]
---

import { Accordions, Accordion } from "@/components/accordion";

# Routing Best Practices

## Learning Objectives

By the end of this lesson, you will:

-  [ ] Ensure routed navigation is accessible and keyboard-friendly.
-  [ ] Guard sensitive routes in preparation for authentication.
-  [ ] Instrument navigation events for analytics and debugging.
-  [ ] Produce a routing checklist to reuse in future modules.

## Project Context

Routing now powers the TaskFlow Pro experience. Aligning conventions prevents
regressions as the app grows and prepares the codebase for authentication
(Module 7) and deployment (Module 8).

---

## Accessibility & UX

-  Manage focus on route changes (`focusHeading` pattern).
-  Provide skip navigation links for screen readers.
-  Maintain consistent page titles for deep links.

```tsx
useEffect(() => {
   document.title = `TaskFlow Pro ¬∑ ${pageTitle}`;
}, [pageTitle]);
```

---

## Guarding Routes

Even before auth exists, scaffold a guard component for protected areas.

```tsx
function ProtectedRoute({ children }: { children: React.ReactNode }) {
   const { user } = useAuth();
   return user ? <>{children}</> : <Navigate to='/dashboard' replace />;
}
```

---

## Navigation Analytics

Hook into location changes to log route transitions.

```tsx
const location = useLocation();

useEffect(() => {
   analytics.track("route_change", { pathname: location.pathname });
}, [location.pathname]);
```

---

## ‚úÖ Best Practices

### 1. Sync Focus After Navigation

**Why:** Keyboard users need the main content in focus after route changes.

```tsx
const headingRef = useRef<HTMLHeadingElement | null>(null);
useEffect(() => headingRef.current?.focus(), [location.pathname]);
```

### 2. Centralize Route Guards

**Why:** Protecting routes in one place avoids scattered logic.

```tsx
<Route
   path='settings/*'
   element={
      <ProtectedRoute>
         <SettingsLayout />
      </ProtectedRoute>
   }
/>
```

---

## ‚ùå Common Mistakes

### 1. Forgetting to Reset Scroll

**Problem:** Users land mid-page after navigation.

**Solution:** Use `useEffect` to `window.scrollTo(0,0)` on route change.

### 2. Ignoring Error Boundaries

**Problem:** Failing route loaders crash the whole app.

**Solution:** Add route-level error boundaries or fallback UIs.

---

## üî® Implement in TaskFlow Pro

Enforce best practices across the router:

1. Create `src/router/RouteChangeTracker.tsx` that logs analytics and resets
   scroll/focus.
2. Wrap `AppLayout` outlet with this tracker component.
3. Add a `ProtectedRoute` wrapper for `/settings` (still allowing access today,
   but log a warning if unauthenticated).
4. Document conventions in `docs/routing-best-practices.md`.
5. Commit with `git commit -am "chore: enforce routing best practices"`.

<Accordions type='single' className='mt-4'>
   <Accordion title='Solution Walkthrough'>
      <p>Codify routing practices so future modules stay aligned.</p>

      ```tsx filename="src/router/RouteChangeTracker.tsx"
      import { useEffect, useRef } from "react";
      import { useLocation } from "react-router-dom";

      export function RouteChangeTracker({ children }: { children: React.ReactNode }) {
         const location = useLocation();
         const focusRef = useRef<HTMLDivElement | null>(null);

         useEffect(() => {
            window.scrollTo({ top: 0, behavior: "smooth" });
            focusRef.current?.focus();
            console.info("[analytics] route_change", { pathname: location.pathname });
         }, [location.pathname]);

         return (
            <div ref={focusRef} tabIndex={-1} className='outline-none focus-visible:outline'>
               {children}
            </div>
         );
      }
      ```

      ```tsx filename="src/router/ProtectedRoute.tsx"
      import { Navigate } from "react-router-dom";

      export function ProtectedRoute({ children }: { children: React.ReactNode }) {
         const { user } = useAuth();

         if (!user) {
            console.warn("Attempted to access protected route without auth");
            return <Navigate to='/dashboard' replace />;
         }

         return <>{children}</>;
      }
      ```

      ```md filename="docs/routing-best-practices.md"
      # Routing Best Practices

      - [ ] Update page title on navigation
      - [ ] Reset scroll and focus for keyboard users
      - [ ] Track route change analytics
      - [ ] Centralize route guards
      - [ ] Provide graceful fallbacks for lazy routes and loaders
      - [ ] Ensure skip navigation links exist on primary layout
      ```

      ```bash
      git add src/router/RouteChangeTracker.tsx src/router/ProtectedRoute.tsx docs/routing-best-practices.md
      git commit -m "chore: enforce routing best practices"
      ```

   </Accordion>
</Accordions>

#### Expected Result

Routing now respects accessibility, logging, and guard conventions, setting a
high bar for future modules.

---

## ‚úÖ Validation Checklist

### Functionality

-  [ ] Route changes reset scroll and focus.
-  [ ] Protected routes redirect unauthenticated users.
-  [ ] Analytics logging fires on navigation.

### Code Quality

-  [ ] Tracker and guard components live in `src/router`.
-  [ ] Documentation lists actionable best practices.

### Understanding

-  [ ] You can explain why accessibility improvements matter.
-  [ ] You know how to extend ProtectedRoute once authentication ships.

### Project Integration

-  [ ] Logs integrate with existing analytics notes from Module 3.
-  [ ] Guards prepare the codebase for Module 7 without blocking today.

---

<div className='mt-8 flex justify-between'>
   <a
      href='/docs/react/m4/6_react-router-part-3'
      className='text-sm font-medium text-muted-foreground hover:text-foreground'
   >
      ‚Üê React Router Part 3
   </a>
   <a
      href='/docs/react/m4/8_implementation'
      className='text-sm font-medium text-primary hover:text-primary/80'
   >
      Next ¬∑ Implementing Module 4
   </a>
</div>
