---
title: "L14: Add to PropertyCard"
description: "Integrate the favorite button into PropertyCard and ListingDetailsCard"
---


Let's add the favorite button to our listing cards so users can favorite listings!

## Current PropertyCard Structure

Our `PropertyCard` component displays listing information:

```jsx title="src/components/PropertyCard.jsx"
function PropertyCard({ listing }) {
  return (
    <div className="border rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
      <img 
        src={listing.images[0]} 
        alt={listing.title}
        className="w-full h-48 object-cover"
      />
      <div className="p-4">
        <h3 className="font-semibold text-lg mb-2">{listing.title}</h3>
        <p className="text-gray-600 mb-2">{listing.description}</p>
        <p className="text-lg font-bold">${listing.price}/night</p>
      </div>
    </div>
  );
}
```

We need to add the favorite button in the **top-right corner of the image**.

## Step 1: Import the Button

Add the import at the top:

```jsx title="src/components/PropertyCard.jsx"
import ListingFavoriteButton from './ListingFavoriteButton';

function PropertyCard({ listing }) {
  return (
    <div className="border rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
      <img 
        src={listing.images[0]} 
        alt={listing.title}
        className="w-full h-48 object-cover"
      />
      <div className="p-4">
        <h3 className="font-semibold text-lg mb-2">{listing.title}</h3>
        <p className="text-gray-600 mb-2">{listing.description}</p>
        <p className="text-lg font-bold">${listing.price}/night</p>
      </div>
    </div>
  );
}
```

## Step 2: Add Relative Positioning

Wrap the image in a container with `relative` positioning:

```jsx title="src/components/PropertyCard.jsx"
import ListingFavoriteButton from './ListingFavoriteButton';

function PropertyCard({ listing }) {
  return (
    <div className="border rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
      <div className="relative">
        <img 
          src={listing.images[0]} 
          alt={listing.title}
          className="w-full h-48 object-cover"
        />
      </div>
      <div className="p-4">
        <h3 className="font-semibold text-lg mb-2">{listing.title}</h3>
        <p className="text-gray-600 mb-2">{listing.description}</p>
        <p className="text-lg font-bold">${listing.price}/night</p>
      </div>
    </div>
  );
}
```

**Why relative?** So the button can be positioned absolutely inside it!

## Step 3: Add the Button

Add the button inside the relative container:

```jsx title="src/components/PropertyCard.jsx"
import ListingFavoriteButton from './ListingFavoriteButton';

function PropertyCard({ listing }) {
  return (
    <div className="border rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
      <div className="relative">
        <img 
          src={listing.images[0]} 
          alt={listing.title}
          className="w-full h-48 object-cover"
        />
        <div className="absolute top-2 right-2">
          <ListingFavoriteButton listingId={listing.id} />
        </div>
      </div>
      <div className="p-4">
        <h3 className="font-semibold text-lg mb-2">{listing.title}</h3>
        <p className="text-gray-600 mb-2">{listing.description}</p>
        <p className="text-lg font-bold">${listing.price}/night</p>
      </div>
    </div>
  );
}
```

**That's it!** The button now appears in the top-right corner! 🎉

## Complete PropertyCard Code

Here's the complete updated component:

```jsx title="src/components/PropertyCard.jsx"
import { Link } from 'react-router-dom';
import ListingFavoriteButton from './ListingFavoriteButton';

function PropertyCard({ listing }) {
  return (
    <Link 
      to={`/listings/${listing.id}`}
      className="block border rounded-lg overflow-hidden hover:shadow-lg transition-shadow"
    >
      <div className="relative">
        <img 
          src={listing.images[0]} 
          alt={listing.title}
          className="w-full h-48 object-cover"
        />
        <div className="absolute top-2 right-2">
          <ListingFavoriteButton listingId={listing.id} />
        </div>
      </div>
      <div className="p-4">
        <h3 className="font-semibold text-lg mb-2">{listing.title}</h3>
        <p className="text-gray-600 text-sm mb-2 line-clamp-2">
          {listing.description}
        </p>
        <p className="text-lg font-bold">${listing.price}/night</p>
      </div>
    </Link>
  );
}

export default PropertyCard;
```

## Understanding the Positioning

Let's break down how the positioning works:

<Accordions>

<Accordion title="Relative + Absolute Positioning">

**Parent with `relative`:**
```jsx
<div className="relative">
  {/* Creates positioning context */}
</div>
```

**Child with `absolute`:**
```jsx
<div className="absolute top-2 right-2">
  {/* Positioned relative to parent */}
</div>
```

**How it works:**

```
┌─────────────────────────────┐
│ relative container          │
│                             │
│  <img />                    │
│                             │
│               ┌───────────┐ │
│               │  absolute │ │ ← top-2 right-2
│               │  button   │ │
│               └───────────┘ │
└─────────────────────────────┘
```

**Without relative parent:**
- Button would position relative to the entire page!
- Would float in wrong place

**With relative parent:**
- Button positions relative to the image container
- Stays in top-right corner of image

</Accordion>

<Accordion title="Why Wrap in Div?">

**Why not put absolute directly on button?**

```jsx
{/* ❌ This won't work as expected */}
<img className="relative" />
<ListingFavoriteButton className="absolute" />
```

**Problem:** Button is sibling to image, not child!

**Solution:** Wrap in container:

```jsx
{/* ✅ Correct structure */}
<div className="relative">
  <img />
  <div className="absolute">
    <ListingFavoriteButton />
  </div>
</div>
```

**Button is now child of relative container!**

</Accordion>

<Accordion title="top-2 right-2 Spacing">

```jsx
className="absolute top-2 right-2"
```

**Means:**
- `top-2` = 8px from top
- `right-2` = 8px from right

**Alternatives:**

```jsx
// Closer to corner
className="absolute top-1 right-1"  // 4px spacing

// Further from corner
className="absolute top-4 right-4"  // 16px spacing

// Bottom-right corner
className="absolute bottom-2 right-2"

// Top-left corner
className="absolute top-2 left-2"
```

**Choose based on design preference!**

</Accordion>

</Accordions>

## Add to ListingDetailsCard

Let's also add the button to the details page:

```jsx title="src/components/ListingDetailsCard.jsx"
import ListingFavoriteButton from './ListingFavoriteButton';

function ListingDetailsCard({ listing }) {
  return (
    <div className="max-w-4xl mx-auto p-6">
      <div className="relative mb-6">
        <img 
          src={listing.images[0]} 
          alt={listing.title}
          className="w-full h-96 object-cover rounded-lg"
        />
        <div className="absolute top-4 right-4">
          <ListingFavoriteButton listingId={listing.id} />
        </div>
      </div>
      
      <div className="mb-6">
        <h1 className="text-3xl font-bold mb-2">{listing.title}</h1>
        <p className="text-gray-600 mb-4">{listing.description}</p>
        <p className="text-2xl font-bold">${listing.price}/night</p>
      </div>
      
      {/* More details... */}
    </div>
  );
}

export default ListingDetailsCard;
```

**Same pattern:**
1. Wrap image in relative container
2. Add button with absolute positioning
3. Position in top-right corner

## Styling Variations

<Tabs items={['Default (Top-Right)', 'With Background', 'Bottom-Right', 'With Shadow']}>

<Tab value="Default (Top-Right)">

**Standard placement (what we have):**

```jsx
<div className="absolute top-2 right-2">
  <ListingFavoriteButton listingId={listing.id} />
</div>
```

**Clean and simple!**

</Tab>

<Tab value="With Background">

**Add background for better visibility:**

```jsx
<div className="absolute top-2 right-2 bg-white/80 backdrop-blur-sm rounded-full">
  <ListingFavoriteButton listingId={listing.id} />
</div>
```

**Classes explained:**
- `bg-white/80` - 80% opaque white background
- `backdrop-blur-sm` - Blur content behind
- `rounded-full` - Circular background

**Better for images with light colors!**

</Tab>

<Tab value="Bottom-Right">

**Alternative position:**

```jsx
<div className="absolute bottom-2 right-2">
  <ListingFavoriteButton listingId={listing.id} />
</div>
```

**Positioned at bottom instead of top!**

</Tab>

<Tab value="With Shadow">

**Add shadow for depth:**

```jsx
<div className="absolute top-2 right-2 shadow-lg rounded-full">
  <ListingFavoriteButton listingId={listing.id} />
</div>
```

**Shadow makes button stand out more!**

</Tab>

</Tabs>

## Enhanced Version with Background

For better visibility on all images:

```jsx title="src/components/PropertyCard.jsx"
import { Link } from 'react-router-dom';
import ListingFavoriteButton from './ListingFavoriteButton';

function PropertyCard({ listing }) {
  return (
    <Link 
      to={`/listings/${listing.id}`}
      className="block border rounded-lg overflow-hidden hover:shadow-lg transition-shadow"
    >
      <div className="relative">
        <img 
          src={listing.images[0]} 
          alt={listing.title}
          className="w-full h-48 object-cover"
        />
        <div className="absolute top-2 right-2 bg-white/90 backdrop-blur-sm rounded-full shadow-md">
          <ListingFavoriteButton listingId={listing.id} />
        </div>
      </div>
      <div className="p-4">
        <h3 className="font-semibold text-lg mb-2">{listing.title}</h3>
        <p className="text-gray-600 text-sm mb-2 line-clamp-2">
          {listing.description}
        </p>
        <p className="text-lg font-bold">${listing.price}/night</p>
      </div>
    </Link>
  );
}

export default PropertyCard;
```

**Added:**
- `bg-white/90` - Semi-transparent white background
- `backdrop-blur-sm` - Blur effect
- `shadow-md` - Medium shadow
- `rounded-full` - Circular container

**Result:** Button visible on any image color! ✨

## Testing the Integration

Let's verify everything works:

<Steps>

<Step>

### Check HomePage

Go to the homepage - each listing card should have a heart button!

**Expected:**
- Button in top-right of each image
- Gray outline hearts (not favorited yet)

</Step>

<Step>

### Click a Button

Click a heart button.

**Expected:**
- Heart turns red and fills
- Navbar counter increases by 1
- Redux DevTools shows ID added to favorites

</Step>

<Step>

### Click Again

Click the same heart button.

**Expected:**
- Heart turns gray and unfills
- Navbar counter decreases by 1
- Redux DevTools shows ID removed from favorites

**Perfect toggle behavior!** 🎉

</Step>

<Step>

### Check Favorites Page

Favorite a few listings, then go to Favorites page.

**Expected:**
- Favorited listings shown
- Hearts filled (red)
- Can unfavorite from this page too

</Step>

<Step>

### Check Details Page

Click a listing to go to details.

**Expected:**
- Heart button on details page
- Synced with card state (if favorited on card, also favorited on details)

</Step>

</Steps>

## State Synchronization

The beauty of Redux: **all buttons stay in sync!**

<Accordions>

<Accordion title="How Synchronization Works">

**All components read same Redux state:**

```
Redux Store
├─ favorites: [1, 5, 9]
│
├─ HomePage Card 1 ──→ isFavorited = true  (✅ in [1,5,9])
├─ HomePage Card 2 ──→ isFavorited = false (❌ not in [1,5,9])
├─ HomePage Card 5 ──→ isFavorited = true  (✅ in [1,5,9])
│
├─ DetailsPage for 1 ──→ isFavorited = true
├─ FavoritesPage showing 1, 5, 9 ──→ all favorited
│
└─ Navbar counter ──→ 3
```

**When you toggle:**
1. One button dispatches action
2. Redux updates state
3. **All components re-render**
4. All buttons update automatically

**Single source of truth!** ✨

</Accordion>

<Accordion title="Example Flow">

**Initial state:**
```js
favorites: []
```

**User favorites listing 1 on HomePage:**
1. Click button on Card 1
2. Dispatch `toggleFavorite(1)`
3. Redux: `favorites = [1]`
4. **All components re-render:**
   - HomePage Card 1: heart fills
   - Navbar: shows "(1)"
   - FavoritesPage: now shows 1 listing

**User navigates to listing 1 details:**
- Details page button already filled!
- State was already updated

**User unfavorites on details page:**
1. Click button on DetailsPage
2. Dispatch `toggleFavorite(1)`
3. Redux: `favorites = []`
4. **All components re-render:**
   - DetailsPage: heart unfills
   - HomePage Card 1: heart unfills (even though not visible)
   - Navbar: shows no count
   - FavoritesPage: now empty

**Always synchronized!** 🎯

</Accordion>

</Accordions>

## Common Issues & Solutions

<Accordions>

<Accordion title="Button Not Appearing">

**Problem:** Button doesn't show on card.

**Possible causes:**

1. **Forgot to import:**
   ```jsx
   import ListingFavoriteButton from './ListingFavoriteButton';
   ```

2. **Didn't add to JSX:**
   ```jsx
   <ListingFavoriteButton listingId={listing.id} />
   ```

3. **Wrong path:**
   ```jsx
   // Check the file path is correct
   import ListingFavoriteButton from '@/components/ListingFavoriteButton';
   ```

</Accordion>

<Accordion title="Button in Wrong Position">

**Problem:** Button not in top-right corner.

**Check:**

1. **Parent has relative:**
   ```jsx
   <div className="relative">  {/* Must have this! */}
     <img />
     <div className="absolute top-2 right-2">
       <Button />
     </div>
   </div>
   ```

2. **Child has absolute:**
   ```jsx
   <div className="absolute top-2 right-2">  {/* Must have absolute */}
     <Button />
   </div>
   ```

</Accordion>

<Accordion title="Clicking Button Navigates">

**Problem:** Clicking favorite button also navigates to details.

**Cause:** Button inside Link, click bubbles up.

**Solution:** Already handled in ListingFavoriteButton!

```jsx
const handleClick = (e) => {
  e.stopPropagation();  // Prevents click from bubbling to Link
  dispatch(toggleFavorite(listingId));
};
```

**If still happening:** Make sure you're using the version with `stopPropagation()`!

</Accordion>

<Accordion title="Button Not Syncing">

**Problem:** Favoriting on one page doesn't update other pages.

**Check:**

1. **Using Redux correctly:**
   ```jsx
   const isFavorited = useSelector((state) => 
     state.listings.favorites.includes(listingId)
   );
   ```

2. **Dispatching action:**
   ```jsx
   dispatch(toggleFavorite(listingId));
   ```

3. **Redux store configured:**
   - Store has listingsReducer
   - Provider wraps app

**Open Redux DevTools** to see state changes!

</Accordion>

</Accordions>

## What's Next?

Excellent! The favorites feature is complete. In the final lesson, we'll:

1. **Review all concepts** - Redux patterns we learned
2. **Complete code walkthrough** - End-to-end favorites feature
3. **Best practices** - When to use Redux vs local state
4. **Performance tips** - Optimizing Redux apps

<Callout type="success">
**✅ Lesson Complete!** The favorite button is now integrated into all listing cards!
</Callout>

## Key Takeaways

- ✅ **Relative + absolute positioning** for overlay elements
- ✅ **Wrap image in div** to create positioning context
- ✅ **top-2 right-2** for corner positioning
- ✅ **stopPropagation()** prevents click bubbling to parent Link
- ✅ **Redux synchronization** - all buttons stay in sync automatically
- ✅ **Reusable component** - works in cards, details, anywhere
- ✅ **Background/shadow** improves visibility on any image
