---
title: "Improving Forms & Inputs"
description:
   "Elevate TaskFlow Pro forms with reusable input components, hotkeys, and
   inline feedback."
module: "MX"
lesson: "2"
difficulty: "advanced"
duration: "30"
project_phase: "Advanced polish"
prerequisites: ["/docs/react/mx/1_introduction"]
learning_objectives:
   - "Refactor forms into reusable headless input primitives"
   - "Add keyboard shortcuts and command palette integration"
   - "Deliver inline validation with animation and accessibility"
   - "Persist drafts with autosave"
tags: ["forms", "ui", "accessibility"]
---

import { Accordions, Accordion } from "@/components/accordion";

# Improving Forms & Inputs

## Headless Input Primitives

```tsx filename="src/components/forms/TextField.tsx"
import { forwardRef } from "react";
import { cn } from "@/lib/cn";

interface TextFieldProps extends React.InputHTMLAttributes<HTMLInputElement> {
   label: string;
   error?: string;
   hint?: string;
}

export const TextField = forwardRef<HTMLInputElement, TextFieldProps>(
   ({ label, error, hint, className, ...props }, ref) => (
      <label className='block space-y-1'>
         <span className='font-medium text-sm'>{label}</span>
         <input
            ref={ref}
            className={cn(
               "w-full rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-fd-primary",
               error ? "border-red-500 focus:ring-red-500" : "border-border"
            )}
            aria-invalid={Boolean(error)}
            {...props}
         />
         {hint && <span className='text-xs text-muted-foreground'>{hint}</span>}
         {error && (
            <span role='alert' className='text-xs text-red-500'>
               {error}
            </span>
         )}
      </label>
   )
);
```

-  Compose with React Hook Form's `Controller` for complex inputs.
-  Keep presentational logic separate from validation rules.

---

## Command Palette Integration

```tsx filename="src/components/CommandPalette.tsx"
import { useHotkeys } from "react-hotkeys-hook";

export const CommandPalette = () => {
   const [isOpen, setIsOpen] = useState(false);

   useHotkeys("meta+k, ctrl+k", (event) => {
      event.preventDefault();
      setIsOpen((prev) => !prev);
   });

   return (
      <Dialog open={isOpen} onOpenChange={setIsOpen}>
         {/* palette content */}
      </Dialog>
   );
};
```

-  Provide shortcuts for creating tasks (`c`), assigning owners (`shift+a`).
-  Announce palette toggles to screen readers via `aria-live`.

---

## Inline Feedback

<Accordions type='single' className='mt-4'>
   <Accordion title='Animation Checklist'>
      <ul className='list-disc pl-5 text-sm'>
         <li>Use 150ms fade/slide transitions for errors.</li>
         <li>Prefer CSS transitions over JS for performance.</li>
         <li>
            Respect reduced motion settings with `@media
            (prefers-reduced-motion)`.
         </li>
      </ul>
   </Accordion>
</Accordions>

Autosave drafts using debounced mutation:

```tsx filename="src/hooks/useAutosave.ts"
export const useAutosave = (
   callback: (values: FormValues) => void,
   delay = 800
) => {
   const latest = useRef(values);
   useEffect(() => {
      latest.current = values;
   }, [values]);

   useEffect(() => {
      const id = setTimeout(() => callback(latest.current), delay);
      return () => clearTimeout(id);
   }, [callback, delay, values]);
};
```

---

## ✅ Validation Checklist

-  [ ] Headless input primitives adopted across forms.
-  [ ] Command palette shortcuts documented and accessible.
-  [ ] Inline validation animated with reduced-motion support.
-  [ ] Autosave logs sync events without flooding API.

---

<div className='mt-8 flex justify-between'>
   <a
      href='/docs/react/mx/1_introduction'
      className='text-sm font-medium text-muted-foreground hover:text-foreground'
   >
      ← Introduction to Extended Enhancements
   </a>
   <a
      href='/docs/react/mx/3_react-query'
      className='text-sm font-medium text-primary hover:text-primary/80'
   >
      Next · Implementing React Query
   </a>
</div>
