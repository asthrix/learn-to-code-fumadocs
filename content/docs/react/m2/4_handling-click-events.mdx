---
title: "Handling Click Events"
description:
   "Toggle task state with precise click handlers that respect accessibility."
module: "M2"
lesson: "4"
difficulty: "beginner"
duration: "25"
project_phase: "Interactivity"
prerequisites: ["/docs/react/m2/3_event-handlers"]
learning_objectives:
   - "Respond to click events with semantic buttons"
   - "Prevent unintended bubbling when nesting controls"
   - "Expose callbacks that update TaskFlow Pro state"
tags: ["events", "click", "accessibility"]
---

import { Accordions, Accordion } from "@/components/accordion";

# Handling Click Events

## Learning Objectives

By the end of this lesson, you will:

-  [ ] Attach click handlers to buttons responsibly.
-  [ ] Prevent double firing when nested interactive elements exist.
-  [ ] Call parent callbacks with the right data payload.
-  [ ] Update TaskFlow Pro's TaskCard to toggle status.

## Project Context

Click events power status toggles, modals, and inline editing. TaskFlow Pro's
TaskCard needs to emit precise updates when users mark tasks complete.

---

## Semantic Buttons First

Use `<button>` elements for click actions. They provide keyboard accessibility
and focus handling out of the box.

```tsx
<button type='button' onClick={handleToggle}>
   Mark Complete
</button>
```

---

## Preventing Event Bubbling

When clickable areas nest, stop propagation in the inner handler so the outer
one does not fire unintentionally.

```tsx
function handleMenuClick(event: React.MouseEvent<HTMLButtonElement>) {
   event.stopPropagation();
   openMenu();
}
```

---

## ‚úÖ Best Practices

### 1. Derive Next State in Parent

**Why:** Keep TaskCard presentational by passing callbacks from the dashboard.

```tsx
<TaskCard task={task} onToggleStatus={() => toggleStatus(task.id)} />
```

### 2. Align Button Labels with State

**Why:** Communicates the resulting action to assistive technology.

```tsx
const label = task.status === "done" ? "Mark as Todo" : "Mark as Done";
```

---

## ‚ùå Common Mistakes

### 1. Using `<div>` for Buttons

**Problem:** Lacks keyboard support by default.

**Solution:** Use `<button>` or add `role="button"`, `tabIndex`, and key
handlers if absolutely necessary.

### 2. Inline Anonymous Functions Without Context

**Problem:** Harder to test and debug.

**Solution:** Wrap handler logic in a named function or `useCallback`.

---

## üî® Implement in TaskFlow Pro

### Task: Toggle TaskCard Status

1. Update `src/components/task/TaskCard.tsx` to accept a new prop
   `onToggleStatus(taskId: string, nextStatus: Task['status']): void`.
2. Render a semantic button that:
   -  Calls the prop with the next status when clicked
   -  Updates its label to reflect the resulting state
   -  Stops propagation so card-level clicks remain unaffected
3. Surface the callback in the component export for later integration.
4. Commit with `git commit -am "feat: add task status toggle"`.

<Accordions type='single' className='mt-4'>
   <Accordion title='Solution Walkthrough'>
      <p>
         Make TaskCard interactive so the dashboard can respond to status toggles without
         duplicating UI.
      </p>

      ```tsx filename="src/components/task/TaskCard.tsx"
      import type { Task } from '@/types/task';
      import { Badge } from '@/components/ui/badge';

      type TaskCardProps = {
         task: Task;
         onToggleStatus?: (taskId: Task['id'], nextStatus: Task['status']) => void;
      };

      export function TaskCard({ task, onToggleStatus }: TaskCardProps) {
         const nextStatus = task.status === 'done' ? 'todo' : 'done';
         const actionLabel = nextStatus === 'done' ? 'Mark as Done' : 'Mark as Todo';

         const handleToggle = (event: React.MouseEvent<HTMLButtonElement>) => {
            event.stopPropagation();
            onToggleStatus?.(task.id, nextStatus);
         };

         return (
            <article className='group flex flex-col justify-between rounded-xl border border-border bg-card p-4 shadow-sm transition hover:border-primary/60'>
               <div className='flex items-start justify-between gap-3'>
                  <h3 className='text-base font-semibold text-foreground'>{task.title}</h3>
                  <Badge variant={task.priority === 'high' ? 'default' : 'secondary'}>
                     {task.priority}
                  </Badge>
               </div>
               <p className='mt-3 text-sm text-muted-foreground'>{task.summary}</p>
               <footer className='mt-4 flex items-center justify-between text-xs text-muted-foreground'>
                  <span>Due {task.dueDate ? new Date(task.dueDate).toLocaleDateString() : 'TBD'}</span>
                  <button
                     type='button'
                     onClick={handleToggle}
                     className='rounded-lg px-2 py-1 font-medium text-primary transition hover:text-primary/80'
                  >
                     {actionLabel}
                  </button>
               </footer>
            </article>
         );
      }
      ```

      ```bash
      git add src/components/task/TaskCard.tsx
      git commit -m "feat: add task status toggle"
      ```

   </Accordion>
</Accordions>

#### Expected Result

TaskCard now exposes a semantic toggle button so the dashboard can mark tasks as
complete.

---

## ‚úÖ Validation Checklist

### Functionality

-  [ ] Button toggles between `todo` and `done` labels.
-  [ ] Event does not bubble to parent containers.

### Code Quality

-  [ ] Next status is derived once per render.
-  [ ] Props remain optional for isolated Storybook usage.

### Understanding

-  [ ] You can explain when to stop event propagation.

### Project Integration

-  [ ] Dashboard can hook into `onToggleStatus` during Module 2 implementation.

---

