---
title: "Handling Change Events"
description:
   "Capture user input with controlled components that stay in sync with state."
module: "M2"
lesson: "5"
difficulty: "beginner"
duration: "25"
project_phase: "Interactivity"
prerequisites: ["/docs/react/m2/4_handling-click-events"]
learning_objectives:
   - "Handle change events on inputs and textareas"
   - "Use controlled components to mirror state"
   - "Validate input incrementally in TaskFlow Pro"
tags: ["events", "forms", "controlled-components"]
---

import { Accordions, Accordion } from "@/components/accordion";

# Handling Change Events

## Learning Objectives

By the end of this lesson, you will:

-  [ ] Wire `onChange` handlers for input, textarea, and select elements.
-  [ ] Keep component state in sync with user input.
-  [ ] Record inline validation messages.
-  [ ] Build the TaskFlow Pro composer as a controlled form.

## Project Context

The Task Composer form is the heart of Module 2. Each field should reflect state
instantly so you can validate before submission and reset drafts after
successful saves.

---

## Controlled Components

A controlled component mirrors its value from React state. The input displays
whatever the state provides, and updates propagate through change handlers.

```tsx
const [title, setTitle] = useState("");
<input value={title} onChange={(event) => setTitle(event.target.value)} />;
```

---

## Inline Validation

React change handlers allow immediate validation feedback.

```tsx
setErrors((previous) => ({
   ...previous,
   title:
      event.target.value.trim().length === 0 ? "Title is required" : undefined,
}));
```

---

## ‚úÖ Best Practices

### 1. Normalize Input Before Saving

**Why:** Keeps stored data consistent.

```tsx
const normalizedTitle = title.trim();
```

### 2. Co-locate Change Handlers with State

**Why:** Avoids drilling event objects through multiple components.

```tsx
<textarea value={summary} onChange={handleSummaryChange} />
```

---

## ‚ùå Common Mistakes

### 1. Mixing Controlled and Uncontrolled Inputs

**Problem:** React warns when an input switches between controlled and
uncontrolled.

**Solution:** Always provide `value` and `onChange` (or remove both).

### 2. Recomputing Validators Inline

**Problem:** Inline logic becomes noisy.

**Solution:** Extract to helper functions or `useMemo` when validation grows.

---

## üî® Implement in TaskFlow Pro

### Task: Build the Task Composer Form

1. Create `src/components/tasks/TaskComposer.tsx`.
2. Accept props:
   ```ts
   type TaskComposerProps = {
      draft: {
         title: string;
         summary: string;
         priority: Priority;
      };
      errors?: Partial<Record<"title" | "summary", string>>;
      onDraftChange(update: Partial<TaskComposerProps["draft"]>): void;
      onCancel(): void;
      onSubmit(): void;
      isSubmitting?: boolean;
   };
   ```
3. Render controlled inputs for title, summary, and priority select.
4. Display inline error messages beneath each field when provided.
5. Include `Cancel` and `Create Task` buttons; disable submit while
   `isSubmitting`.
6. Commit with `git commit -am "feat: scaffold task composer"`.

<Accordions type='single' className='mt-4'>
   <Accordion title='Solution Walkthrough'>
      <p>
         Build a controlled form component that TaskFlow Pro can reuse across create and
         edit flows.
      </p>

      ```tsx filename="src/components/tasks/TaskComposer.tsx"
      import type { Priority } from '@/types/task';
      import { buttonVariants } from '@/components/ui/button';
      import { cn } from '@/lib/cn';

      type ComposerDraft = {
         title: string;
         summary: string;
         priority: Priority;
      };

      type TaskComposerProps = {
         draft: ComposerDraft;
         errors?: Partial<Record<'title' | 'summary', string>>;
         onDraftChange: (update: Partial<ComposerDraft>) => void;
         onCancel: () => void;
         onSubmit: () => void;
         isSubmitting?: boolean;
      };

      const PRIORITY_OPTIONS: Priority[] = ['low', 'medium', 'high'];

      export function TaskComposer({
         draft,
         errors,
         onDraftChange,
         onCancel,
         onSubmit,
         isSubmitting = false,
      }: TaskComposerProps) {
         const updateDraft = <Key extends keyof ComposerDraft>(key: Key) =>
            (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
               onDraftChange({ [key]: event.target.value } as Partial<ComposerDraft>);
            };

         return (
            <form className='space-y-4 rounded-xl border border-border bg-card p-6 shadow-sm'>
               <header>
                  <h2 className='text-lg font-semibold text-foreground'>Create Task</h2>
                  <p className='mt-1 text-sm text-muted-foreground'>Draft a new task for the dashboard backlog.</p>
               </header>
               <div className='space-y-2'>
                  <label htmlFor='task-title' className='text-sm font-medium text-foreground'>Title</label>
                  <input
                     id='task-title'
                     value={draft.title}
                     onChange={updateDraft('title')}
                     placeholder='Launch marketing campaign'
                     className='w-full rounded-lg border border-border bg-background px-3 py-2 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20'
                  />
                  {errors?.title ? (
                     <p className='text-xs font-medium text-destructive'>{errors.title}</p>
                  ) : null}
               </div>
               <div className='space-y-2'>
                  <label htmlFor='task-summary' className='text-sm font-medium text-foreground'>Summary</label>
                  <textarea
                     id='task-summary'
                     value={draft.summary}
                     onChange={updateDraft('summary')}
                     rows={4}
                     placeholder='Outline expected outcomes and acceptance criteria'
                     className='w-full rounded-lg border border-border bg-background px-3 py-2 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20'
                  />
                  {errors?.summary ? (
                     <p className='text-xs font-medium text-destructive'>{errors.summary}</p>
                  ) : null}
               </div>
               <div className='space-y-2'>
                  <label htmlFor='task-priority' className='text-sm font-medium text-foreground'>Priority</label>
                  <select
                     id='task-priority'
                     value={draft.priority}
                     onChange={updateDraft('priority')}
                     className='w-full rounded-lg border border-border bg-background px-3 py-2 text-sm shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20'
                  >
                     {PRIORITY_OPTIONS.map((option) => (
                        <option key={option} value={option} className='capitalize'>
                           {option}
                        </option>
                     ))}
                  </select>
               </div>
               <footer className='flex justify-end gap-3'>
                  <button
                     type='button'
                     onClick={onCancel}
                     className={buttonVariants({ variant: 'ghost' })}
                     disabled={isSubmitting}
                  >
                     Cancel
                  </button>
                  <button
                     type='button'
                     onClick={onSubmit}
                     className={cn(buttonVariants({ variant: 'primary' }), 'disabled:opacity-60')}
                     disabled={isSubmitting || draft.title.trim().length === 0}
                  >
                     {isSubmitting ? 'Creating‚Ä¶' : 'Create Task'}
                  </button>
               </footer>
            </form>
         );
      }
      ```

      ```bash
      git add src/components/tasks/TaskComposer.tsx
      git commit -m "feat: scaffold task composer"
      ```

   </Accordion>
</Accordions>

#### Expected Result

You have a controlled Task Composer ready to connect to stateful hooks.

---

## ‚úÖ Validation Checklist

### Functionality

-  [ ] Inputs mirror the `draft` prop.
-  [ ] Submit button disables when the title is empty or submitting.

### Code Quality

-  [ ] Change handlers reuse the `updateDraft` helper.
-  [ ] Errors display conditionally without layout shifts.

### Understanding

-  [ ] You can describe the difference between controlled and uncontrolled
       inputs.

### Project Integration

-  [ ] Composer will plug into Module 2's tasks state hook.

---

<div className='mt-8 flex justify-between'>
   <a
      href='/docs/react/m2/4_handling-click-events'
      className='text-sm font-medium text-muted-foreground hover:text-foreground'
   >
      ‚Üê Handling Click Events
   </a>
   <a
      href='/docs/react/m2/6_handling-form-submission'
      className='text-sm font-medium text-primary hover:text-primary/80'
   >
      Next ¬∑ Handling Form Submission
   </a>
</div>
