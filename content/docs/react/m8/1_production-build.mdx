---
title: "Production Build"
description:
   "Optimize the TaskFlow Pro build, analyze bundles, and prepare environment
   variables."
module: "M8"
lesson: "1"
difficulty: "intermediate"
duration: "25"
project_phase: "Deployment"
prerequisites: ["/docs/react/m7/11_auth-rollout"]
learning_objectives:
   - "Run production builds locally with profiling"
   - "Inspect bundle size and identify heavy dependencies"
   - "Configure environment variables for deployment"
   - "Document build artifacts for stakeholders"
tags: ["deployment", "nextjs", "build"]
---

import { Accordions, Accordion } from "@/components/accordion";

# Production Build

## Learning Objectives

-  [ ] Produce a deterministic production build.
-  [ ] Capture bundle metrics for review.
-  [ ] Define required environment variables.
-  [ ] Store build command outputs for the team.

---

## Build Commands

```bash
npm run build
```

-  Verify build output completes without warnings.
-  Capture the route manifest for QA sign-off.

Add profiling to catch regressions:

```bash
NEXT_TELEMETRY_DEBUG=1 npm run build
```

---

## Bundle Analysis

```bash
npm install --save-dev @next/bundle-analyzer
npx next build
```

Open the generated report and target:

-  200 kB or less for initial route JS.
-  Lazy load administrative components.
-  Confirm `react-hook-form` and `zustand` remain under 30 kB together.

---

## Environment Variables

| Key                      | Purpose                        | Deployment Scope |
| ------------------------ | ------------------------------ | ---------------- |
| `NEXT_PUBLIC_API_URL`    | Points to production backend   | Preview + Prod   |
| `TASKFLOW_ANALYTICS_KEY` | Enables analytics client       | Prod only        |
| `SENTRY_DSN`             | Error reporting sink           | Preview + Prod   |
| `TASKFLOW_FEATURE_FLAGS` | JSON flag payload for rollouts | Preview + Prod   |

Store secrets in Vercel project settings, never in Git history.

---

## Build Artifacts

<Accordions type='single' className='mt-4'>
   <Accordion title='Build Log Template'>
      <p>Use this template when attaching logs to release notes.</p>

      ```md filename="docs/deployment/build-log-template.md"
      # Build Summary
      - Date:
      - Commit:
      - Build Duration:
      - Bundle Size (initial route):
      - Notable Changes:
      ```

   </Accordion>
</Accordions>

---

## ✅ Validation Checklist

-  [ ] Production build completes with zero warnings.
-  [ ] Bundle analyzer report shared with the team.
-  [ ] Environment variables documented in the runbook.
-  [ ] Build logs archived for deployment review.

---

<div className='mt-8 flex justify-between'>
   <a
      href='/docs/react/m8/0_index'
      className='text-sm font-medium text-muted-foreground hover:text-foreground'
   >
      ← Module Overview
   </a>
   <a
      href='/docs/react/m8/2_vercel-deployment'
      className='text-sm font-medium text-primary hover:text-primary/80'
   >
      Next · Vercel Deployment
   </a>
</div>
