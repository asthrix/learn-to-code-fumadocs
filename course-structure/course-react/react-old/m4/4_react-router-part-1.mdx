---
title: "React Router Part 1"
description: "Set up BrowserRouter, Routes, and the application layout shell."
module: "M4"
lesson: "4"
difficulty: "intermediate"
duration: "30"
project_phase: "Navigation"
prerequisites: ["/docs/react/m4/3_routing-in-react"]
learning_objectives:
   - "Initialize BrowserRouter with top-level routes"
   - "Render layout components via `Outlet`"
   - "Handle default redirects for the root path"
   - "Keep state hooks working after router integration"
tags: ["react-router", "routing", "layout"]
---

import { Accordions, Accordion } from "@/components/accordion";

# React Router Part 1

## Learning Objectives

By the end of this lesson, you will:

-  [ ] Wrap TaskFlow Pro in `BrowserRouter`.
-  [ ] Define top-level routes for dashboard, projects, and settings.
-  [ ] Use `Outlet` to render page content within `DashboardLayout`.
-  [ ] Redirect `/` to `/dashboard` for a consistent entry point.

## Project Context

This lesson converts the single-page dashboard into a routed application while
preserving the stateful experience shipped in Module 3.

---

## BrowserRouter Setup

`BrowserRouter` listens to the History API and renders matching routes.

### Basic Example

```tsx
import { BrowserRouter } from "react-router-dom";

ReactDOM.createRoot(document.getElementById("root")!).render(
   <BrowserRouter>
      <App />
   </BrowserRouter>
);
```

### Practical Example

```tsx
<BrowserRouter>
   <Routes>
      <Route element={<AppLayout />}>
         <Route path='dashboard' element={<DashboardPage />} />
      </Route>
   </Routes>
</BrowserRouter>
```

---

## Default Redirects

Ensure `/` points to `/dashboard` using `<Navigate />` or route loaders.

```tsx
<Route index element={<Navigate to={routes.dashboard} replace />} />
```

---

## ‚úÖ Best Practices

### 1. Keep Layouts Declarative

**Why:** Using `Outlet` avoids prop drilling.

```tsx
function AppLayout() {
   return (
      <DashboardShell>
         <Outlet />
      </DashboardShell>
   );
}
```

### 2. Preserve State Hooks

**Why:** `useTasksState` should continue powering dashboard content.

```tsx
<Route path='dashboard' element={<DashboardPage />} />
```

---

## ‚ùå Common Mistakes

### 1. Forgetting the Index Route

**Problem:** Visiting `/` shows a blank screen.

**Solution:** Define `index` or redirect to the default page.

### 2. Re-mounting Providers

**Problem:** Moving providers inside routes causes state resets.

**Solution:** Keep providers (QueryClient, Theme) above `BrowserRouter` when
possible.

---

## üî® Implement in TaskFlow Pro

Wire up the root router:

1. Create `src/router/AppRouter.tsx` exporting the `BrowserRouter` tree with
   `Routes` and `Route` definitions.
2. Add `AppLayout` that renders `Header`, `Sidebar`, and an `Outlet` for child
   pages.
3. Register routes for `/dashboard`, `/projects`, `/settings` (placeholder
   components for now).
4. Redirect `/` to `/dashboard`.
5. Commit with `git commit -am "feat: add router layout"`.

<Accordions type='single' className='mt-4'>
   <Accordion title='Solution Walkthrough'>
      <p>Lay down the foundational routes while keeping the existing UI intact.</p>

      ```tsx filename="src/router/AppRouter.tsx"
      import { BrowserRouter, Navigate, Route, Routes } from "react-router-dom";
      import { AppLayout } from "@/router/AppLayout";
      import { DashboardPage } from "@/pages/DashboardPage";
      import { ProjectsPage } from "@/pages/ProjectsPage";
      import { SettingsPage } from "@/pages/SettingsPage";

      export function AppRouter() {
         return (
            <BrowserRouter>
               <Routes>
                  <Route element={<AppLayout />}>
                     <Route index element={<Navigate to='/dashboard' replace />} />
                     <Route path='dashboard' element={<DashboardPage />} />
                     <Route path='projects' element={<ProjectsPage />} />
                     <Route path='settings' element={<SettingsPage />} />
                  </Route>
               </Routes>
            </BrowserRouter>
         );
      }
      ```

      ```tsx filename="src/router/AppLayout.tsx"
      import { Outlet } from "react-router-dom";
      import { DashboardShell } from "@/components/layout/DashboardShell";
      import { Header } from "@/components/layout/Header";
      import { Sidebar } from "@/components/layout/Sidebar";

      export function AppLayout() {
         return (
            <DashboardShell>
               <Header />
               <div className='grid gap-6 md:grid-cols-[280px_1fr]'>
                  <aside>
                     <Sidebar />
                  </aside>
                  <main>
                     <Outlet />
                  </main>
               </div>
            </DashboardShell>
         );
      }
      ```

      ```bash
      git add src/router/AppRouter.tsx src/router/AppLayout.tsx src/pages
      git commit -m "feat: add router layout"
      ```

   </Accordion>
</Accordions>

#### Expected Result

TaskFlow Pro now navigates between dashboard, projects, and settings without
page reloads.

---

## ‚úÖ Validation Checklist

### Functionality

-  [ ] Visiting `/` redirects to `/dashboard`.
-  [ ] Layout renders header + sidebar with route content in `Outlet`.
-  [ ] Navigating between pages preserves state providers.

### Code Quality

-  [ ] Router files live in `src/router` for clarity.
-  [ ] Route components reside in `src/pages` (or similar) for separation.

### Understanding

-  [ ] You can explain why `Navigate` handles default routes cleanly.
-  [ ] You can describe how `Outlet` enables nested layouts.

### Project Integration

-  [ ] Dashboard page reuses Module 3 data hooks.
-  [ ] Projects/Settings placeholders prepare for deeper lessons.

---

