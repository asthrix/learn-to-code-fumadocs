---
title: "Routing & Detail Page"
description:
   "Add React Router, create the listing detail view, and wire navigation
   between screens."
module: "M4"
lesson: "2"
difficulty: "intermediate"
duration: "45"
project_phase: "Launch"
prerequisites: ["/docs/react-new/m4/1_project-brief"]
learning_objectives:
   - "Configure React Router with layout routes"
   - "Create a detail page consuming data from context"
   - "Implement saved stays view using shared state"
tags: ["routing", "detail-page", "react-router"]
---

import { Accordions, Accordion } from "@/components/accordion";

# Routing & Detail Page

Time to expand StaySense beyond a single page. You'll install React Router,
create layout routes, and render detailed information for each listing.

---

## 1. Install React Router

```bash
npm install react-router-dom
```

---

## 2. Update Entry Point

Replace `src/main.tsx` with router configuration:

```tsx
import React from "react";
import ReactDOM from "react-dom/client";
import { RouterProvider, createBrowserRouter } from "react-router-dom";
import App from "./App";
import { ListingDetailPage } from "./pages/ListingDetailPage";
import { SavedPage } from "./pages/SavedPage";
import "./index.css";

const router = createBrowserRouter([
   {
      path: "/",
      element: <App />,
      children: [
         {
            path: "/",
            element: null, // App renders home content
         },
         {
            path: "/saved",
            element: <SavedPage />,
         },
         {
            path: "/listing/:id",
            element: <ListingDetailPage />,
         },
      ],
   },
]);

ReactDOM.createRoot(document.getElementById("root")!).render(
   <React.StrictMode>
      <RouterProvider router={router} />
   </React.StrictMode>
);
```

In `App.tsx`, render `<Outlet />` where route content should appear.

---

## 3. Create Layout Shell with Outlet

```tsx
import { Outlet, useLocation } from "react-router-dom";

export default function App() {
   // existing state & providers
   return (
      <main className='min-h-screen bg-slate-950 text-slate-50'>
         <Header savedCount={savedListingIds.length} />
         <Hero key={useLocation().pathname} />
         <ListingsProvider params={params}>
            <Outlet
               context={{
                  savedListingIds,
                  onToggleSave: handleToggleSave,
                  filters: {
                     /* filter state */
                  },
                  filterHandlers: {
                     /* setter functions */
                  },
               }}
            />
         </ListingsProvider>
         <AboutSection />
      </main>
   );
}
```

Home content (listing grid) now lives in a new component `HomePage` consumed by
the root route.

---

## 4. Build HomePage, SavedPage, DetailPage

-  `src/pages/HomePage.tsx`: renders `ListingSection`.
-  `src/pages/SavedPage.tsx`: filters listings from context by
   `savedListingIds`.
-  `src/pages/ListingDetailPage.tsx`: finds listing by ID from context and
   renders gallery, description, amenities, and CTA.

Example detail page snippet:

```tsx
import { useParams, useNavigate } from "react-router-dom";
import { useListingsContext } from "../context/ListingsContext";

export function ListingDetailPage() {
   const { id } = useParams();
   const navigate = useNavigate();
   const { listings } = useListingsContext();
   const listing = listings.find((item) => item.id === Number(id));

   if (!listing) {
      return (
         <section className='mx-auto max-w-4xl px-6 py-24 text-center text-slate-300'>
            <p>We couldn't find that stay.</p>
            <button
               className='mt-4 rounded-full border px-5 py-2 text-sm'
               onClick={() => navigate(-1)}
            >
               Go back
            </button>
         </section>
      );
   }

   return (
      <article className='mx-auto grid max-w-5xl gap-10 px-6 py-16 md:grid-cols-[2fr_1fr]'>
         <div className='space-y-6'>
            <img
               src={listing.imageUrl}
               alt={listing.name}
               className='h-[420px] w-full rounded-3xl object-cover'
            />
            <p className='text-lg text-slate-200'>{listing.description}</p>
            <ul className='flex flex-wrap gap-3 text-xs text-emerald-200'>
               {listing.amenities.map((amenity) => (
                  <li
                     key={amenity}
                     className='rounded-full border border-emerald-200/40 px-3 py-1'
                  >
                     {amenity}
                  </li>
               ))}
            </ul>
         </div>
         <aside className='space-y-6 rounded-3xl border border-white/10 bg-white/5 p-8'>
            <h2 className='text-xl font-semibold text-white'>Plan your stay</h2>
            <p className='text-sm text-slate-300'>
               From ${listing.pricePerNight}/night · Sleeps {listing.maxGuests}{" "}
               guests
            </p>
            <button className='w-full rounded-full bg-emerald-400 px-6 py-3 text-sm font-medium text-emerald-950 hover:bg-emerald-300'>
               Request booking
            </button>
         </aside>
      </article>
   );
}
```

Add `description`, `maxGuests`, `gallery` arrays to the listing type if needed.

---

## Task · Wire the Router Completely

1. Refactor `App.tsx` + pages as described.
2. Update links: Header nav links use `<Link>` components targeting `/` and
   `/saved`.
3. `ListingCard` button should navigate to `/listing/${listing.id}` using
   `useNavigate`.
4. Commit with `git commit -am "feat: add routing and detail page"`.

<Accordions type='single' className='mt-4'>
   <Accordion title='Solution Walkthrough'>
      ```tsx
      // src/components/ListingCard.tsx
      import { useNavigate } from "react-router-dom";

      export function ListingCard({ listing, isSaved, onToggleSave }: ListingCardProps) {
         const navigate = useNavigate();
         // ...
         <div className='flex gap-3'>
            <button type='button' onClick={onToggleSave} aria-pressed={isSaved} className='flex-1 rounded-lg border px-4 py-2 text-sm'>
               {isSaved ? "Saved" : "Save stay"}
            </button>
            <button
               type='button'
               onClick={() => navigate(`/listing/${listing.id}`)}
               className='flex-1 rounded-lg bg-emerald-400 px-4 py-2 text-sm font-medium text-emerald-950'
            >
               View
            </button>
         </div>
      }
      ```

      ```bash
      git add src/main.tsx src/App.tsx src/pages/HomePage.tsx src/pages/SavedPage.tsx src/pages/ListingDetailPage.tsx src/components/ListingCard.tsx src/components/Header.tsx
      git commit -m "feat: add routing and detail page"
      ```

   </Accordion>
</Accordions>

---

## ✅ Validation Checklist

-  [ ] Navigating to `/listing/:id` shows detail view populated with API data.
-  [ ] Saved page lists only saved stays (or empty state).
-  [ ] Browser back/forward works due to client-side routing.
