---
title: "Module Task · Interactive Filters"
description:
   "Ship StaySense filters end to end, wire saved stays to persistence, and
   document the release."
module: "M2"
lesson: "5"
difficulty: "beginner"
duration: "45"
project_phase: "Interactivity"
prerequisites:
   [
      "/docs/react-new/m2/1_state-basics",
      "/docs/react-new/m2/2_event-handling",
      "/docs/react-new/m2/3_lists-and-conditions",
      "/docs/react-new/m2/4_controlled-forms",
   ]
learning_objectives:
   - "Combine form inputs, state, and derived data into a coherent UX"
   - "Persist saved stays using `localStorage` and effect hooks"
   - "Evaluate UX with the validation checklist"
tags: ["project", "state", "filters"]
---

import { Accordions, Accordion } from "@/components/accordion";

# Module Task · Interactive Filters

This milestone turns StaySense into an interactive browsing tool. You'll persist
saved stays, polish the filter UI, and capture release notes.

---

## Milestone Requirements

1. **Persistent saved stays**: Saved IDs rehydrate on page refresh.
2. **Filter summary**: Display the active filters above results.
3. **Empty state call-to-action**: Provide a button to clear filters when no
   results match.
4. **Release notes**: Document behaviour, limitations, and learning takeaways.

---

## Task · Persist & Polish

1. In `App.tsx`, initialise `savedListingIds` from
   `localStorage.getItem("staysense-saved")` (parse JSON safely).
2. Use `useEffect` to sync saved IDs back to `localStorage` when the array
   changes.
3. Render an "Active filters" pill group above the listing grid (e.g., price,
   guests, categories) with a "Clear all" button.
4. Update `docs/releases/m2-interactive-filters.md` with highlights and
   screenshots.
5. Commit with `git commit -am "feat: persist saved stays and filters"`.

<Accordions type='single' className='mt-4'>
   <Accordion title='Solution Walkthrough'>
      ```tsx
      // src/App.tsx
      const [savedListingIds, setSavedListingIds] = useState<number[]>(() => {
         const stored = localStorage.getItem("staysense-saved");
         if (!stored) return [];
         try {
            const parsed = JSON.parse(stored);
            return Array.isArray(parsed) ? parsed : [];
         } catch (error) {
            console.warn("Failed to parse saved listings", error);
            return [];
         }
      });

      useEffect(() => {
         localStorage.setItem("staysense-saved", JSON.stringify(savedListingIds));
      }, [savedListingIds]);
      ```

      ```tsx
      // src/components/ListingSection.tsx
      const activeFilterLabels = [
         ...(activeCategories.includes("All") ? [] : activeCategories),
         `≤ $${maxPrice}`,
         `${guests}+ guest${guests === 1 ? "" : "s"}`,
         search ? `“${search}”` : null,
      ].filter(Boolean);

      <div className='flex flex-wrap items-center gap-3'>
         {activeFilterLabels.map((label) => (
            <span
               key={label as string}
               className='rounded-full border border-white/20 px-3 py-1 text-xs text-slate-200'
            >
               {label}
            </span>
         ))}
         <button
            type='button'
            onClick={() => {
               onSearchChange("");
               onMaxPriceChange(400);
               onGuestsChange(2);
               onCategoryChange("All");
            }}
            className='text-xs text-emerald-300 underline-offset-4 hover:underline'
         >
            Clear all
         </button>
      </div>
      ```

      ```md
      <!-- docs/releases/m2-interactive-filters.md -->
      # Module 2 · Interactive Filters

      ## Highlights
      - Added controlled filter form with search, max price, and guest count.
      - Persisted saved stays via localStorage for session continuity.
      - Surfaced active filter pills with one-click reset.

      ## Screenshot
      - `docs/releases/screenshots/m2-filters.png`

      ## Known Limitations
      - Filters do not yet hit the mock API (arrives in Module 3).
      - Saved stays sync locally only; no cross-device persistence.
      ```

      ```bash
      git add src/App.tsx src/components/ListingSection.tsx docs/releases/m2-interactive-filters.md
      git commit -m "feat: persist saved stays and filters"
      ```

   </Accordion>
</Accordions>

---

## ✅ Module 2 Validation Checklist

-  [ ] Saved stays persist across reloads.
-  [ ] Active filter pills summarise price, guests, categories, and search.
-  [ ] Clear-all button resets filters and results instantly.
-  [ ] Release notes capture highlights and limitations.
